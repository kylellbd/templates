<!DOCTYPE html>
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/morris/morris.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/fullcalendar/fullcalendar.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/jqvmap/jqvmap/jqvmap.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="/assets/global/css/components.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="/assets/layouts/layout/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/layouts/layout/css/themes/darkblue.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="/assets/layouts/layout/css/custom.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME LAYOUT STYLES -->

    <link href="/assets/global/plugins/bootstrap-table/bootstrap-table.css" rel="stylesheet" type="text/css" />
    <title>VIP设置</title>
    <link rel="shortcut icon" href="favicon.ico" />
</head>
<!-- END HEAD -->

<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
    <div class="page-wrapper">
        <!-- BEGIN HEADER -->
        <div class="page-header navbar navbar-fixed-top">
            <!-- BEGIN HEADER INNER -->
            <div class="page-header-inner ">
                <!-- BEGIN LOGO -->
                <div class="page-logo">
                    <a href="/templates/adm/index.html">
                        <img src="" alt="logo" class="logo-default" /> </a>
                    <div class="menu-toggler sidebar-toggler">
                        <span></span>
                    </div>
                </div>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
                <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">
                    <span></span>
                </a>
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN TOP NAVIGATION MENU -->
                <div class="top-menu">
                    <ul class="nav navbar-nav pull-right">
                        <!-- END USER LOGIN DROPDOWN -->
                        <!-- BEGIN QUICK SIDEBAR TOGGLER -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <li>
                            <p style="color: white">Welcome Loginer</p>
                        </li>
                        <li class="dropdown dropdown-quick-sidebar-toggler">
                            <a href="javascript:;" class="dropdown-toggle">
                                <i class="icon-logout"></i>
                            </a>
                        </li>
                        <!-- END QUICK SIDEBAR TOGGLER -->
                    </ul>
                </div>
                <!-- END TOP NAVIGATION MENU -->
            </div>
            <!-- END HEADER INNER -->
        </div>
        <!-- END HEADER -->
        <!-- BEGIN HEADER & CONTENT DIVIDER -->
        <div class="clearfix"> </div>
        <!-- END HEADER & CONTENT DIVIDER -->
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN SIDEBAR -->
            <div class="page-sidebar-wrapper">
                <div class="page-sidebar navbar-collapse collapse">
                    <ul id="ul_menu" class="page-sidebar-menu  page-header-fixed " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200" style="padding-top: 20px">


                    </ul>
                </div>
            </div>
            <!-- END SIDEBAR -->

            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content">
                    <!-- BEGIN PAGE HEADER-->
                    <!-- BEGIN PAGE TITLE-->
                    <h1 class="page-title"> 普通VIP达标设置
                        <small>...</small>
                    </h1>
                    <!-- END PAGE TITLE-->
                    <!-- END PAGE HEADER-->
                    <!-- BEGIN DASHBOARD STATS 1-->
                    <div class="clearfix"></div>
                    <!-- END DASHBOARD STATS 1-->
                    <div class="row">
                        <div class="col-md-9">
                            <div class="portlet light">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="fa fa-shopping-cart"></i>VIP达标设置</div>
                                    <div align="right">
                                        <input type="checkbox" class="make-switch" name="VipFormEdit" id="VipFormEdit" data-on-color="success" data-off-color="danger" data-on-text="Edit" data-off-text="ReadOnly">
                                        <button type="button" class="btn blue" id="saveBtn">Save</button>
                                    </div>
                                    <!-- <div class="tools">
                                            <a href="javascript:;" class="collapse" data-original-title="" title=""> </a>
                                            <a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title=""> </a>
                                            <a href="javascript:;" class="reload" data-original-title="" title=""> </a>
                                            <a href="javascript:;" class="remove" data-original-title="" title=""> </a>
                                        </div> -->
                                </div>
                                <div class="portlet-body">
                                    <div class="table-scrollable  form-group form-md-line-input">
                                        <form name="VipForm">
                                            <table class="table table-striped table-bordered table-advance table-hover">
                                                <thead>
                                                    <tr>
                                                        <th width="10%" style="text-align: center"> VIP达标typeId </th>
                                                        <th width="15%" style="text-align: center"> 上周交易量条件 </th>
                                                        <th width="15%" style="text-align: center"> 上月交易量条件 </th>
                                                        <th width="15%" style="text-align: center"> 前3月交易量条件 </th>
                                                        <th width="15%" style="text-align: center"> autocheck </th>
                                                        <th width="20%" style="text-align: center"> 备注 </th>
                                                        <th witdh='10%' style="text-align: center"> 保持天数 </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr id="vip0_1">
                                                        <td style="text-align: center">
                                                            vip0_1
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTWEEKTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTWEEKTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTMONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTMONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LAST3MONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LAST3MONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" name="AUTOCHECK" data-key="AUTOCHECK" data-type="SELECT">
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="MEMO" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="TEXT">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="EFFCDAYS" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="INTEGER" data-inputmask="'alias':'leftInteger'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr id="vip1_1">
                                                        <td style="text-align: center">
                                                            vip1_1
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTWEEKTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTWEEKTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTMONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTMONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LAST3MONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LAST3MONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" name="AUTOCHECK" data-key="AUTOCHECK" data-type="SELECT">
                                                                </select>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="MEMO" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="TEXT">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="EFFCDAYS" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="INTEGER" data-inputmask="'alias':'leftInteger'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr id="vip2_1">
                                                        <td style="text-align: center">
                                                            vip2_1
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTWEEKTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTWEEKTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTMONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTMONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LAST3MONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LAST3MONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" name="AUTOCHECK" data-key="AUTOCHECK" data-type="SELECT">
                                                                    </select>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="MEMO" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="TEXT">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="EFFCDAYS" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="INTEGER" data-inputmask="'alias':'leftInteger'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr id="vip3_1">
                                                        <td style="text-align: center">
                                                            vip3_1
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTWEEKTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTWEEKTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTMONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTMONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LAST3MONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LAST3MONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" name="AUTOCHECK" data-key="AUTOCHECK" data-type="SELECT">
                                                                        </select>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="MEMO" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="TEXT">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="EFFCDAYS" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="INTEGER" data-inputmask="'alias':'leftInteger'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr id="vip4_1">
                                                        <td style="text-align: center">
                                                            vip4_1
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTWEEKTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTWEEKTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LASTMONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LASTMONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="LAST3MONTHTRADE" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="LAST3MONTHTRADE" data-type="MONEY" data-inputmask="'alias':'currency_normal'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" name="AUTOCHECK" data-key="AUTOCHECK" data-type="SELECT">
                                                                            </select>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="MEMO" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="TEXT">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="col-md-12">
                                                                <input type="text" class="form-control" placeholder="" name="EFFCDAYS" aria-required="true" aria-invalid="false" aria-describedby="name-error" data-key="EFFCDAYS" data-type="INTEGER" data-inputmask="'alias':'leftInteger'">
                                                                <div class="form-control-focus"> </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
        </div>
        <!-- END CONTAINER -->
        <!-- BEGIN FOOTER -->
        <div class="page-footer">
            <div class="page-footer-inner"> 2019 &copy; By Kyle.Moon
            </div>
            <div class="scroll-to-top">
                <i class="icon-arrow-up"></i>
            </div>
        </div>
        <!-- END FOOTER -->
    </div>

    <!--[if lt IE 9]>
<script src="../assets/global/plugins/respond.min.js"></script>
<script src="../assets/global/plugins/excanvas.min.js"></script> 
<script src="../assets/global/plugins/ie8.fix.min.js"></script> 
<![endif]-->
    <!-- BEGIN CORE PLUGINS -->
    <script src="/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/backstretch/jquery.backstretch.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL SCRIPTS -->
    <script src="/assets/global/scripts/app.js" type="text/javascript"></script>
    <script src="/templates/adm/admMenu.js" type="text/javascript"></script>
    <script src="/assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
    <script src="/templates/adm/adminComm.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {

            Comm.init();

            getBizData();

            $("#VipFormEdit").on('switchChange.bootstrapSwitch', function(event, state) {
                //这个state就是选择的状态
                if (state) {
                    editable();
                } else {
                    readonly();
                }
            });

            $("#saveBtn").on('click', function() {
                saveData();
            });


            readonly();

        });

        function saveData() {

            var vip0_1 = Comm.getDomData($('#vip0_1'));
            var vip1_1 = Comm.getDomData($('#vip1_1'));
            var vip2_1 = Comm.getDomData($('#vip2_1'));
            var vip3_1 = Comm.getDomData($('#vip3_1'));
            var vip4_1 = Comm.getDomData($('#vip4_1'));
            vip0_1.VIPTYPEID = 'vip0_1';
            vip1_1.VIPTYPEID = 'vip1_1';
            vip2_1.VIPTYPEID = 'vip2_1';
            vip3_1.VIPTYPEID = 'vip3_1';
            vip4_1.VIPTYPEID = 'vip4_1';

            var vipTypes = [];
            vipTypes.push(vip0_1);
            vipTypes.push(vip1_1);
            vipTypes.push(vip2_1);
            vipTypes.push(vip3_1);
            vipTypes.push(vip4_1);


            console.log(JSON.stringify(vipTypes));
            console.log(Comm.getHeader());
            var settings = {
                "async": true,
                "crossDomain": true,
                "url": "http://62.234.152.219:90/api/Vip/SaveAllVipType",
                "method": "POST",
                "headers": Comm.getPostHeader(),
                "data": JSON.stringify(vipTypes)
            }
            $.ajax(settings).done(function(response) {
                console.log(response);
                getBizData();
            });
        }

        function getBizData() {
            var settings = {
                "async": true,
                "crossDomain": true,
                "url": "http://62.234.152.219:90/api/Vip/GetAllVipType",
                "method": "GET",
                "headers": Comm.getHeader()
            }

            $.ajax(settings).done(function(response) {
                if (response.Result == 0) {
                    var autoCheckSelectList = response.Data.autoCheckSelect;
                    initSelect(autoCheckSelectList);
                    var vipTypes = response.Data.vipTypes;
                    setTableData(vipTypes);
                }
            });
        }

        function setTableData(vipTypes) {
            vipTypes.forEach(function(item) {
                var v_id = item.VIPTYPEID;
                var dom = $("#" + v_id);
                Comm.setDomData(dom, item);
            });
        }

        function initSelect(autoCheckSelectList) {
            var optionsHtml = "";
            autoCheckSelectList.forEach(function(item) {
                optionsHtml += '<option value="' + item.CODEID + '">' + item.CODEKR + '</option>';
            });
            $("[name='AUTOCHECK']").empty();
            $("[name='AUTOCHECK']").append(optionsHtml);
        }


        function editable() {
            $("input[type='text']").each(function(i, ipt) {
                $(ipt).attr("readonly", false);
            });
            $(".make-switch").each(function() {
                if (this.id != "VipFormEdit") {
                    $(this).bootstrapSwitch("readonly", false);
                }
            });
            $("select").each(function(i, ipt) {
                $(ipt).attr("disabled", false);
            });
        }

        function readonly() {
            $("#VipForm").find("input").attr("readonly", true);


            $("input[type='text']").each(function(i, ipt) {
                $(ipt).attr("readonly", true);
            });
            $("select").each(function(i, ipt) {
                $(ipt).attr("disabled", true);
            });

            $(".make-switch").each(function() {
                if (this.id != "VipFormEdit") {
                    $(this).bootstrapSwitch("readonly", true);
                }
            });
        }
    </script>
</body>

</html>