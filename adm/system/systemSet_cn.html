<!DOCTYPE html>
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <link rel="import" href="/templates/adm/commCss.html">
    <title>系统运营配置</title>
    <link rel="shortcut icon" href="favicon.ico" />
</head>
<!-- END HEAD -->

<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
    <div class="page-wrapper">
        <!-- BEGIN HEADER -->
        <div class="page-header navbar navbar-fixed-top">
            <!-- BEGIN HEADER INNER -->
            <div class="page-header-inner ">
                <!-- BEGIN LOGO -->
                <div class="page-logo">
                    <a href="/templates/adm/index.html">
                        <img src="" alt="logo" class="logo-default" /> </a>
                    <div class="menu-toggler sidebar-toggler">
                        <span></span>
                    </div>
                </div>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
                <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">
                    <span></span>
                </a>
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN TOP NAVIGATION MENU -->
                <div class="top-menu">
                    <ul class="nav navbar-nav pull-right">
                        <!-- END USER LOGIN DROPDOWN -->
                        <!-- BEGIN QUICK SIDEBAR TOGGLER -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <li>
                            <p style="color: white">Welcome Loginer</p>
                        </li>
                        <li class="dropdown dropdown-quick-sidebar-toggler">
                            <a href="javascript:;" class="dropdown-toggle">
                                <i class="icon-logout"></i>
                            </a>
                        </li>
                        <!-- END QUICK SIDEBAR TOGGLER -->
                    </ul>
                </div>
                <!-- END TOP NAVIGATION MENU -->
            </div>
            <!-- END HEADER INNER -->
        </div>
        <!-- END HEADER -->
        <!-- BEGIN HEADER & CONTENT DIVIDER -->
        <div class="clearfix"> </div>
        <!-- END HEADER & CONTENT DIVIDER -->
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN SIDEBAR -->
            <div class="page-sidebar-wrapper">
                <div class="page-sidebar navbar-collapse collapse">
                    <ul id="ul_menu" class="page-sidebar-menu  page-header-fixed " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200" style="padding-top: 20px">


                    </ul>
                </div>
            </div>
            <!-- END SIDEBAR -->

            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content">
                    <!-- BEGIN PAGE HEADER-->
                    <!-- BEGIN PAGE TITLE-->
                    <h1 class="page-title"> 基本运营配置
                        <small>设置系统运营基础配置数据</small>
                    </h1>
                    <!-- END PAGE TITLE-->
                    <!-- END PAGE HEADER-->
                    <!-- BEGIN DASHBOARD STATS 1-->
                    <div class="clearfix"></div>
                    <!-- END DASHBOARD STATS 1-->
                    <div class="row">
                        <div class="col-md-10">
                            <div class="portlet light form-fit  center">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-social-dribbble"></i>
                                        <span class="caption-subject bold uppercase">基本运营配置</span>
                                    </div>
                                    <div align="right">
                                        <input type="checkbox" class="make-switch" name="SystemSetFormEdit" id="SystemSetFormEdit" data-on-color="success" data-off-color="danger" data-on-text="Edit" data-off-text="ReadOnly">
                                        <button type="button" class="btn blue" id="systemSetSave">Save</button>

                                        <button type="button" class="btn blue" id="setData">TEMPSETDATA</button>
                                    </div>
                                </div>
                                <div class="portlet-body form">

                                    <div class="tabbable-line">
                                        <ul class="nav nav-tabs ">
                                            <li class="active">
                                                <a href="#tab_normal" data-toggle="tab"> 기본운영 </a>
                                            </li>
                                            <li>
                                                <a href="#tab_special" data-toggle="tab"> 특별관리 </a>
                                            </li>
                                        </ul>
                                        <div class="tab-content" style="padding:0;">
                                            <div class="tab-pane active" id="tab_normal">
                                                <form action="#" class="form-horizontal form-bordered" id="systemNormalForm">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">거래수수료 발생 시기</label>
                                                            <div class="col-md-3">
                                                                <select class="form-control" id="TradeFeeMode" name="TradeFeeMode" data-key="TradeFeeMode" data-type="SELECT">
                                                                    <!-- <option value="0001">Open</option>
                                                                    <option value="0002">Close</option>
                                                                    <option value="0003">Both</option> -->
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">거래세 발생 시기</label>
                                                            <div class="col-md-3">
                                                                <select class="form-control" id="TradeTaxMode" name="TradeTaxMode" data-key="TradeTaxMode" data-type="SELECT">
                                                                            <!-- <option value="0001">Open</option>
                                                                            <option value="0002">Close</option>
                                                                            <option value="0003">Both</option> -->
                                                                        </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">취급수수료 발생시기</label>
                                                            <div class="col-md-3">
                                                                <select class="form-control" id="MgmtFeeMode" name="MgmtFeeMode" data-key="MgmtFeeMode" data-type="SELECT">
                                                                            <!-- <option value="0001">Open</option>
                                                                            <option value="0002">Close</option>
                                                                            <option value="0003">Both</option> -->
                                                                        </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">Bonus 적용 여부</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="BonusModeActive" data-on-color="success" data-off-color="danger" data-key="BonusModeActive" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">VipModeActive</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="VipModeActive" data-on-color="success" data-off-color="danger" data-key="VipModeActive" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">VipUpdatePeriod</label>
                                                            <div class="col-md-3">
                                                                <select class="form-control" id="VipUpdatePeriod" name="VipUpdatePeriod" data-key="VipUpdatePeriod" data-type="SELECT">
                                                                            <!-- <option value="0001">Day</option>
                                                                            <option value="0002">Week</option>
                                                                            <option value="0003">Month</option> -->
                                                                        </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">BankProcessTime</label>
                                                            <div class="col-md-3" style="display: inline-flex;">
                                                                <input class="form-control" style="width: 45%;" id="BankProcessTimeS" type="text" maxlength='5' size="10" data-key="BankProcessTimeS" data-type="TEXT" />~
                                                                <input class="form-control" style="width: 45%;" id="BankProcessTimeE" type="text" maxlength='5' size="10" data-key="BankProcessTimeE" data-type="TEXT" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">RejectOrNoTAtNoBankTime</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="RejectOrNoTAtNoBankTime" data-on-color="success" data-off-color="danger" data-key="RejectOrNoTAtNoBankTime" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <!-- <div class="form-group">
                                                            <label class="control-label col-md-3">RejectOrNoTAtNoBankTime</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" checked name="RejectOrNoTAtNoBankTime" data-on-color="success" data-off-color="danger">
                                                            </div>
                                                        </div> -->
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">DepositMinMoney</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="DepositMinMoney" type="text" data-key="DepositMinMoney" data-type="MONEY" data-inputmask="'alias':'currency_normal'" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">DepositMaxMoney</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="DepositMaxMoney" type="text" data-key="DepositMaxMoney" data-type="MONEY" data-inputmask="'alias':'currency_normal'" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">MaxBrrwCnt</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="MaxBrrwCnt" type="text" data-key="MaxBrrwCnt" data-type="INTEGER" data-inputmask="'alias':'leftInteger'" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">MaxBrrwMoney</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="MaxBrrwMoney" type="text" data-key="MaxBrrwMoney" data-type="MONEY" data-inputmask="'alias':'currency_normal'" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">OneTimeMinPrincipal</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="OneTimeMinPrincipal" type="text" data-key="OneTimeMinPrincipal" data-type="MONEY" data-inputmask="'alias':'currency_normal'" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">RealTimeDelay</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="RealTimeDelay" data-on-color="success" data-off-color="danger" data-key="RealTimeDelay" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="tab-pane" id="tab_special">
                                                <form action="#" class="form-horizontal form-bordered" id="systemSpecialForm">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">LossCutPcnt</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="LossCutPcnt" type="text" maxlength='5' data-key="LossCutPcnt" data-type="PERCENT" data-inputmask="'alias':'leftPercent'" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">LossCutCustoms</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="LossCutCustoms" data-on-color="success" data-off-color="danger" data-key="LossCutCustoms" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">ShortSellAllow</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="ShortSellAllow" data-on-color="success" data-off-color="danger" data-key="ShortSellAllow" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">ProfitInvestActive</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="ProfitInvestActive" data-on-color="success" data-off-color="danger" data-key="ProfitInvestActive" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">OverNight</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="OverNight" data-on-color="success" data-off-color="danger" data-key="OverNight" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">OverNightRate</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="OverNightRate" type="text" data-key="OverNightRate" data-type="INTEGER" data-inputmask="'alias':'leftInteger'" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">ReturnTypeOfShortOrder</label>
                                                            <div class="col-md-3">
                                                                <select class="form-control" id="ReturnTypeOfShortOrder" name="ReturnTypeOfShortOrder" data-key="ReturnTypeOfShortOrder" data-type="SELECT">
                                                                                            <!-- <option value="">--선택--</option> -->
                                                                    <!-- <option value="0001">선입선출 방식</option>
                                                                    <option value="0002">후입선출 방식</option>
                                                                    <option value="0003">마진우선 방식</option>
                                                                    <option value="0004">평균가 반환</option>
                                                                    <option value="0005">Close Order가</option> -->
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">ReturnTypeOfShortOrderCustoms</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="ReturnTypeOfShortOrderCustoms" data-on-color="success" data-off-color="danger" data-key="ReturnTypeOfShortOrderCustoms" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">CloseTypeOfOverNightBeyond</label>
                                                            <div class="col-md-3">
                                                                <select class="form-control" id="CloseTypeOfOverNightBeyond" name="CloseTypeOfOverNightBeyond" data-key="CloseTypeOfOverNightBeyond" data-type="SELECT">
                                                                    <!-- <option value="">--선택--</option> -->
                                                                    <!-- <option value="0001">선입선출 방식</option>
                                                                    <option value="0002">후입선출 방식</option>
                                                                    <option value="0003">마진우선</option>
                                                                    <option value="0004">손실우선</option> -->
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">CloseTypeOfOverNightCustoms</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="CloseTypeOfOverNightCustoms" data-on-color="success" data-off-color="danger" data-key="CloseTypeOfOverNightCustoms" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">GuaranteeWithdraw</label>
                                                            <div class="col-md-3">
                                                                <input type="checkbox" class="make-switch" name="GuaranteeWithdraw" data-on-color="success" data-off-color="danger" data-key="GuaranteeWithdraw" data-type="SWITCH">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label col-md-3">GuaranteeWithdrawPcnt</label>
                                                            <div class="col-md-3">
                                                                <input class="form-control" id="GuaranteeWithdrawPcnt" type="text" maxlength='5' data-key="GuaranteeWithdrawPcnt" data-type="PERCENT" data-inputmask="'alias':'leftPercent'" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
        </div>
        <!-- END CONTAINER -->
        <!-- BEGIN FOOTER -->
        <div class="page-footer">
            <div class="page-footer-inner"> 2019 &copy; By Kyle.Moon
            </div>
            <div class="scroll-to-top">
                <i class="icon-arrow-up"></i>
            </div>
        </div>
        <!-- END FOOTER -->
    </div>

    <!--[if lt IE 9]>
<script src="../assets/global/plugins/respond.min.js"></script>
<script src="../assets/global/plugins/excanvas.min.js"></script> 
<script src="../assets/global/plugins/ie8.fix.min.js"></script> 
<![endif]-->
    <link rel="import" href="/templates/adm/commJs.html">

    <script type="text/javascript">
        $(document).ready(function() {

            Comm.init();

            getSelectData();




            $("#SystemSetFormEdit").on('switchChange.bootstrapSwitch', function(event, state) {
                //这个state就是选择的状态
                if (state) {
                    editable();
                } else {
                    readonly();
                }
            });


            readonly();

            $("#systemSetSave").on('click', function(event, state) {
                var datas = Comm.getFormData($("#systemNormalForm"));
                console.log(JSON.stringify(datas));
            });

            $("#setData").on('click', function(event, state) {

                var testData = {
                    "TradeFeeMode": "0002",
                    "TradeTaxMode": "0001",
                    "MgmtFeeMode": "0003",
                    "BonusModeActive": "N",
                    "VipModeActive": "Y",
                    "VipUpdatePeriod": "0002",
                    "BankProcessTimeS": "123",
                    "BankProcessTimeE": "123",
                    "RejectOrNoTAtNoBankTime": "N",
                    "DepositMinMoney": "10000.00",
                    "DepositMaxMoney": "999999.00",
                    "MaxBrrwCnt": 0,
                    "MaxBrrwMoney": 0,
                    "OneTimeMinPrincipal": 0,
                    "RealTimeDelay": "Y"
                };
                Comm.setDomData($("#systemNormalForm"), testData);

            });



        });

        function getBizData() {
            var settings = {
                "async": false,
                "crossDomain": true,
                "url": Comm.getApiUrl() + "/api/Admin/GetOptSettings",
                "method": "GET",
                "headers": Comm.getHeader()
            }

            $.ajax(settings).done(function(response) {
                console.log(response);
                if (response.Result == 0) {
                    var datas = response.Data;
                    $.each(datas, function(index, data) {


                    });
                }
            });
        }

        function getSelectData() {
            var settings = {
                "async": false,
                "crossDomain": true,
                "url": Comm.getApiUrl() + "/api/Code/GetCodeInfoByGroups?groudIds=0014,0015,0023,0025",
                "method": "GET",
                "headers": Comm.getHeader()
            }

            $.ajax(settings).done(function(response) {
                console.log(response);
                if (response.Result == 0) {
                    var datas = response.Data;
                    $.each(datas, function(index, data) {
                        if (data.GroupId == '0014') {
                            initSelect("TradeFeeMode", data.Codeinfos);
                            initSelect("TradeTaxMode", data.Codeinfos);
                            initSelect("MgmtFeeMode", data.Codeinfos);
                        }
                        if (data.GroupId == '0015') {
                            initSelect("VipUpdatePeriod", data.Codeinfos);
                        }
                        if (data.GroupId == '0023') {
                            initSelect("ReturnTypeOfShortOrder", data.Codeinfos);
                        }
                        if (data.GroupId == '0025') {
                            initSelect("CloseTypeOfOverNightBeyond", data.Codeinfos);
                        }

                    });
                }
            });
        }

        function initSelect(elementNm, codeList) {
            var optionsHtml = "";
            $.each(codeList, function(index, item) {
                optionsHtml += '<option value="' + item.CODEID + '">' + item.CODEKR + '</option>';
            });
            var element = $(("#" + elementNm));
            element.empty();
            element.append(optionsHtml);
        }

        function editable() {
            $("input[type='text']").each(function(i, ipt) {
                $(ipt).attr("readonly", false);
            });
            $("select").each(function(i, ipt) {
                $(ipt).attr("disabled", false);
            });
            $(".make-switch").each(function() {
                if (this.id != "SystemSetFormEdit") {
                    $(this).bootstrapSwitch("readonly", false);
                }
            });
        }

        function readonly() {
            $("#SystemSetForm").find("input").attr("readonly", true);

            $("select").each(function(i, ipt) {
                $(ipt).attr("disabled", true);
            });

            $("input[type='text']").each(function(i, ipt) {
                $(ipt).attr("readonly", true);
            });

            $(".make-switch").each(function() {
                if (this.id != "SystemSetFormEdit") {
                    $(this).bootstrapSwitch("readonly", true);
                }
            });
        }
    </script>
</body>

</html>